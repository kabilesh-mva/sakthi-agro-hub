import{j as e}from"./query-ClOPU3jo.js";import{c as y,u as E,a as _}from"./index-BV4ex-Is.js";import{N as C,F as P}from"./Footer-CeD08qhQ.js";import{W as k}from"./WhatsAppButton-DkDJn171.js";import{B as i,C as u,a as f,b as F}from"./card-DVIgzTGa.js";import{r as n}from"./router-BUgJjUvb.js";import{s as S}from"./client-CtY_iIHf.js";import{f as g,g as z,F as A,X as B,P as H,s as V,e as $}from"./utils-CUBaLrxp.js";import"./vendor-BVORfsS8.js";import"./ui-Br0k5SbM.js";import"./supabase-DquKuMF8.js";function o({className:r,...d}){return e.jsx("div",{className:y("animate-pulse rounded-md bg-muted",r),...d})}const G=()=>{const{t:r}=E(),{toast:d}=_(),[l,x]=n.useState("All"),[m,j]=n.useState([]),[v,p]=n.useState(!0),h=["All","Sprayers","Pumps","Engines","Spare Parts","Others"];n.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const{data:t,error:a}=await S.from("products").select("*").order("created_at",{ascending:!1});if(a)throw a;j((t||[]).map(s=>({id:s.id,name:s.name,category:s.category,description:s.description,price:typeof s.price=="number"?s.price:typeof s.price=="string"?parseFloat(s.price):null,image_url:s.image_url,in_stock:s.in_stock,created_at:s.created_at,rating:s.rating||4.5,updated_at:s.updated_at,specifications:s.specifications})))}catch{d({title:"Error",description:"Failed to load products. Please refresh the page.",variant:"destructive"})}finally{p(!1)}},c=l==="All"?m:l==="Others"?m.filter(t=>!["Sprayers","Pumps","Engines","Spare Parts"].includes(t.category)):m.filter(t=>t.category===l),b=h.filter(t=>t!=="All").map(t=>({category:t,items:t==="Others"?c.filter(a=>!["Sprayers","Pumps","Engines","Spare Parts"].includes(a.category)):c.filter(a=>a.category===t)})).filter(t=>t.items.length>0);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(C,{}),e.jsxs("div",{className:"pt-14 md:pt-16 lg:pt-20",children:[e.jsxs("section",{className:"py-12 sm:py-16 bg-gradient-to-r from-[#2E7D32] to-[#1B5E20] text-primary-foreground relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23FFFFFF' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 sm:mb-6",children:r("products_hero_title")}),e.jsx("p",{className:"text-lg sm:text-xl opacity-90 mb-6",children:r("products_hero_subtitle")}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-sm",children:[e.jsx(g,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:r("products_rating_text")})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-sm",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:r("products_farmers_served")})]})]})]})})]}),e.jsx("section",{className:"py-6 bg-white border-b sticky top-0 z-40 shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"flex items-center gap-4 flex-wrap justify-between",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-center flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Filter by Category:"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap justify-center",children:h.map(t=>e.jsxs(i,{variant:l===t?"default":"outline",onClick:()=>x(t),className:"transition-all duration-300",size:"sm",children:[t,l===t&&t!=="All"&&e.jsx(B,{className:"ml-2 h-4 w-4",onClick:a=>{a.stopPropagation(),x("All")}})]},t))})]})}),e.jsxs("div",{className:"text-center mt-3 text-sm text-muted-foreground",children:["Showing ",c.length," ",c.length===1?"product":"products"]})]})}),e.jsx("section",{className:"py-8 sm:py-16 bg-background",children:e.jsx("div",{className:"container mx-auto px-4",children:v?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsxs(u,{className:"overflow-hidden",children:[e.jsx(o,{className:"h-48 w-full"}),e.jsxs(f,{className:"p-6",children:[e.jsx(o,{className:"h-6 w-3/4 mb-2"}),e.jsx(o,{className:"h-4 w-full mb-4"}),e.jsx(o,{className:"h-4 w-1/2"})]})]},t))}):c.length>0?b.map((t,a)=>e.jsxs("div",{className:"mb-12 sm:mb-16",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:t.category}),e.jsxs("span",{className:"ml-auto bg-primary/10 text-primary px-3 py-1 rounded-full text-sm font-medium",children:[t.items.length," items"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.items.map(s=>e.jsxs(u,{className:"hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border-t-4 border-t-[#FF6F00] overflow-hidden group",children:[e.jsx("div",{className:"aspect-square bg-secondary overflow-hidden",children:e.jsx("img",{src:s.image_url||"/placeholder-product.png",alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:w=>{w.currentTarget.src="/placeholder-product.png"}})}),e.jsxs(f,{className:"p-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-xl font-bold line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 bg-[#E8F5E9] px-2 py-1 rounded text-xs font-medium text-[#2E7D32]",children:[e.jsx(g,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:s.rating})]})]}),e.jsx("p",{className:"text-muted-foreground mb-3 line-clamp-2 text-sm",children:s.description||"No description available"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:s.price!==null?`₹${s.price}`:"Price on request"}),s.in_stock===!1&&e.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Out of Stock"})]})]}),e.jsxs(F,{className:"flex flex-col gap-2 p-6 pt-0",children:[e.jsx(i,{size:"sm",variant:"default",asChild:!0,className:"w-full bg-[#2E7D32] hover:bg-[#1B5E20] text-white flex items-center justify-center gap-1 mb-2",disabled:!s.in_stock,children:e.jsxs("a",{href:"tel:+919443600205",className:"flex items-center justify-center gap-1 w-full",children:[e.jsx(H,{className:"h-4 w-4"}),r("product_cta_call")]})}),e.jsx(i,{size:"sm",variant:"outline",asChild:!0,className:"w-full border-[#2E7D32] text-[#2E7D32] hover:bg-[#E8F5E9] flex items-center justify-center gap-1 mb-2",disabled:!s.in_stock,children:e.jsxs("a",{href:`https://wa.me/919443600205?text=${encodeURIComponent(`Inquiry about ${s.name} - ${s.price!==null?`₹${s.price}`:"Price on request"}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 w-full",children:[e.jsx(V,{className:"h-4 w-4"}),r("product_cta_whatsapp")]})})]})]},s.id))})]},a)):e.jsxs("div",{className:"text-center py-16",children:[e.jsx($,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Products Available"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:l==="All"?"No products have been added yet. Please check back later or contact us for inquiries.":`No products found in the ${l} category.`}),e.jsx(i,{asChild:!0,children:e.jsx("a",{href:"tel:+919443600205",children:"Contact Us"})})]})})})]}),e.jsx(P,{}),e.jsx(k,{})]})};export{G as default};
